<div
  class="relative min-h-[calc(100vh-64px)] px-4 sm:px-8 py-10 overflow-hidden"
>
  <!-- Fondo con blur -->
  <div
    class="absolute inset-0 bg-cover bg-center bg-fixed"
    style="
      background-image: url('/fnd3.webp');
      filter: blur(6px) brightness(0.8);
      transform: scale(1.05);
    "
  ></div>

  <!-- Capa para oscurecer un poco el fondo -->
  <div class="absolute inset-0 bg-black/30"></div>

  <!-- CONTENIDO REAL -->
  <div class="relative max-w-6xl mx-auto">

    <!-- Título + subtítulo -->
    <div class="mb-8 text-white drop-shadow-lg">
      <h1 class="text-2xl sm:text-3xl font-extrabold mb-2 flex items-center gap-2">
        <span>Cursos disponibles</span>
        <mat-icon class="!text-[rgb(255,191,120)]">menu_book</mat-icon>
      </h1>

      <p class="text-sm sm:text-base text-[rgb(230,230,230)]">
        Explora los cursos de DevSchool y continúa tu ruta de aprendizaje.
      </p>
    </div>

    <!-- Loading -->
    <div *ngIf="cargando" class="flex justify-center py-10">
      <div class="flex flex-col items-center gap-3 text-white">
        <mat-progress-spinner diameter="40" mode="indeterminate"></mat-progress-spinner>
        <span>Cargando cursos...</span>
      </div>
    </div>

    <!-- Error -->
    <div
      *ngIf="!cargando && error"
      class="bg-red-900/40 border border-red-700 text-red-200
             px-4 py-3 rounded-xl max-w-xl mx-auto mb-6 flex items-center gap-2 backdrop-blur-sm"
    >
      <mat-icon class="!text-red-300">error_outline</mat-icon>
      <span class="text-sm">{{ error }}</span>
    </div>

    <!-- Sin cursos -->
    <div
      *ngIf="!cargando && !error && cursos.length === 0"
      class="text-center text-gray-200 py-12"
    >
      <mat-icon class="!text-4xl !mb-2 text-gray-300">info</mat-icon>
      <p class="text-sm">
        Aún no hay cursos disponibles. Vuelve más tarde.
      </p>
    </div>

    <!-- GRID -->
    <div
      *ngIf="!cargando && !error && cursos.length > 0"
      class="grid gap-6 sm:gap-8 grid-cols-1 md:grid-cols-2 xl:grid-cols-3"
    >
      <mat-card
        *ngFor="let curso of cursos"
        class="curso-card rounded-2xl shadow-xl bg-white/95 border border-[#ffdab3]
               text-[rgb(78,52,46)] flex flex-col justify-between overflow-hidden backdrop-blur-sm"
      >
        <!-- Imagen del curso -->
        <ng-container *ngIf="curso.imagenUrl; else sinImagen">
          <img
            [src]="curso.imagenUrl"
            [alt]="curso.titulo"
            class="w-full h-40 object-cover"
          />
        </ng-container>

        <ng-template #sinImagen>
          <div
            class="w-full h-40 bg-[#ffe0c7] flex items-center justify-center 
                   text-[rgb(161,136,127)] text-xs uppercase tracking-wide"
          >
            <mat-icon class="mr-2 !text-[rgb(188,170,164)]">
              image_not_supported
            </mat-icon>
            Sin imagen
          </div>
        </ng-template>

        <!-- CONTENIDO -->
        <div class="space-y-4 p-4 pb-5 flex-1 flex flex-col justify-between">
          <!-- Nivel + lecciones -->
          <div class="flex items-center justify-between text-xs text-[rgb(141,110,99)] mb-1">
            <mat-chip-set>
              <mat-chip
                class="!bg-[#ffefe1] !text-[rgb(255,106,0)] !text-[11px] !font-semibold"
              >
                {{ curso.nivel }}
              </mat-chip>
            </mat-chip-set>

            <div class="flex items-center gap-1">
              <mat-icon class="!text-xs !text-[rgb(161,136,127)]">
                play_circle
              </mat-icon>
              <span>{{ curso.lecciones || 0 }} lecciones</span>
            </div>
          </div>

          <!-- Título -->
          <h2 class="text-lg font-bold text-[rgb(78,52,46)] line-clamp-2">
            {{ curso.titulo }}
          </h2>

          <!-- Descripción -->
          <p class="text-sm text-[rgb(109,76,65)] line-clamp-3">
            {{ curso.descripcion }}
          </p>

          <!-- Progreso -->
          <div class="mt-4 pt-3 border-t border-[#ffe0c7] space-y-3">
            <div class="flex items-center justify-between text-xs text-[rgb(141,110,99)] mb-1">
              <span>Progreso</span>
              <span>{{ curso.progreso || 0 }}%</span>
            </div>

            <mat-progress-bar
              mode="determinate"
              [value]="curso.progreso || 0"
              class="curso-progress-bar"
            ></mat-progress-bar>

            <!-- Botón -->
            <button
              mat-raised-button
              class="w-full mt-3 !rounded-xl bg-[#ff6a00] hover:bg-[#e95f00] 
                     text-white font-semibold py-2"
              (click)="irAlCurso(curso)"
            >
              {{ getEtiquetaBoton(curso) }}
            </button>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>
